<!DOCTYPE html>
<html>

<head>

    <title>Myproject Page</title>
</head>

<body>
    <h2>창고관리자 페이지</h2>
    <p>메뉴</p>
    <a href="./api/querykey">이력 관리</a>
    <br>
    <a href="./api1/enrollGoods_container">상품 이력 등록</a>
    <br>
    <a href="./api1/sendGoods_container">상품 출고</a>
    <br>
    <a href="./api/queryAllGoods">원두 이력 확인</a>
    <br>
    <a href="#">마이 페이지</a>
    <br>
    <br>

    <a href="/">로그아웃</a>
    <div>
        <div id="chatLogs"></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        $(function () {
            // socket.io 서버에 접속한다
            var socket = io();
            var domain = new Array();

            // 서버로부터의 메시지가 수신되면
            socket.on("importer_enroll_seed1", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두 ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("importer_enroll_seed2", function (data) {
                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    console.log(domain);
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("container_enroll_seed1", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("container_enroll_seed2", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("Roast_enroll_seed1", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("Roast_enroll_seed2", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("Roast_enroll_seed3", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("Package_enroll_seed1", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });

            socket.on("Package_enroll_seed2", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });

            socket.on("Package_enroll_seed3", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });

            domain = JSON.parse(sessionStorage.getItem("domain"));

            for (var i = 0; i < domain.length; i++) {
                $("#chatLogs").append("-------------------" + domain[i].from + "   " + domain[i].job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + domain[i].key + "</strong></div><br>")
                    .append("BlockNumber : " + domain[i].blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + domain[i].transactionId + "</strong></div><br>")
                    .append("status : " + domain[i].status + "</strong></div><br><br>");
            }
        });
    </script>


</body>

</html>