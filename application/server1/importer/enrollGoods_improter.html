<!DOCTYPE html>
<html>

<head>
    <title>CreateKey Page</title>
</head>

<body>

    <h1>유통업체</h1>
    <hr />
    <form method="post">
        <table>
            <tr>
                <td><label>원두ID</label></td>
                <td><input type="text" name="key" /></td>
            </tr>
            <tr>
                <td><label>날짜 등록</label></td>
                <td><input type="text" name="value11" /></td>
            </tr>
            <tr>
                <td><label>품종</label></td>
                <td><input type="text" name="value12" /></td>
            </tr>
            <tr>
                <td><label>산지</label></td>
                <td><input type="text" name="value13" /></td>
            </tr>
            <tr>
                <td><label>수확일</label></td>
                <td><input type="text" name="value14" /></td>
            </tr>
            <tr>
                <td><label>수량</label></td>
                <td><input type="text" name="value15" /></td>
            </tr>
            <tr>
                <td><label>생두 등급</label></td>
                <td><input type="text" name="value16" /></td>
            </tr>
            <tr>
                <td><label>(추가 사항) 재배 고도 </label></td>
                <td><input type="text" name="latitute" /></td>
            </tr>

        </table>
        <input type="submit" name="" />
    </form>

    <br><br>
    <a href="/">로그아웃</a>
    <div>
        <div id="chatLogs"></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        $(function () {
            // socket.io 서버에 접속한다
            var socket = io();
            var domain = new Array();

            // 서버로부터의 메시지가 수신되면
            socket.on("importer_enroll_seed1", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두 ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("importer_enroll_seed2", function (data) {
                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    console.log(domain);
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("container_enroll_seed1", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("container_enroll_seed2", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("Roast_enroll_seed1", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("Roast_enroll_seed2", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("Roast_enroll_seed3", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });
            socket.on("Package_enroll_seed1", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });

            socket.on("Package_enroll_seed2", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });

            socket.on("Package_enroll_seed3", function (data) {

                domain = JSON.parse(sessionStorage.getItem("domain"));

                if (domain == null) {
                    domain = [data];
                } else {
                    domain.push(data);
                }
                sessionStorage.setItem("domain", JSON.stringify(domain));
                $("#chatLogs").append("-------------------" + data.from + "   " + data.job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + data.key + "</strong></div><br>")
                    .append("BlockNumber : " + data.blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + data.transactionId + "</strong></div><br>")
                    .append("status : " + data.status + "</strong></div><br><br>");

            });

            domain = JSON.parse(sessionStorage.getItem("domain"));

            for (var i = 0; i < domain.length; i++) {
                $("#chatLogs").append("-------------------" + domain[i].from + "   " + domain[i].job + "-------------------" + "</strong></div><br>")
                    .append("원두ID : " + domain[i].key + "</strong></div><br>")
                    .append("BlockNumber : " + domain[i].blockNumber + "</strong></div><br>")
                    .append("TransaciontID : " + domain[i].transactionId + "</strong></div><br>")
                    .append("status : " + domain[i].status + "</strong></div><br><br>");
            }
        });
    </script>

</body>

</html>